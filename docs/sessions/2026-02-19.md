# Session Notes — Thursday 19 February 2026

This file tracks PRs opened in the Claude Code sessions on 18–19 February 2026.

## Session 1 (18 Feb)

- **#23** `fix(waivers)`: Implement `resolveRosterGW` — fix dropped players re-appearing as drop candidates
- **#24** `chore(workflows)`: Restrict review workflows to `dev→stage` and `stage→main` transitions only

## Session 2 (19 Feb)

- **#37** `feat`: Add 6 new MCP tools (`current_roster`, `draft_picks`, `manager_season`, `transaction_analysis`, `player_gw_stats`, `head_to_head`), refactor agent routing (LLM-first, `_INTENT_KEYWORDS`, `max_steps` 4→6), fix issues #25 and #31
- **#38** `fix(ci)`: Retire Codex workflows and duplicate Claude review (#32)
- **#39** `docs(config)`: Document all Settings fields in `.env.example` (#34)
- **#40** `refactor(constants)`: Extract `POSITION_TYPE_LABELS` to shared constants module (#28)
- **#41** `refactor(constants)`: Extract `GW_PATTERN` regex; fix double-escaped `\\s*` bug in `rag.py` (#33)
- **#42** `refactor(agent)`: Replace session `dict` with typed `AgentSession` TypedDict (#36)
- **#43** `refactor(agent)`: Consolidate 17 `_looks_like_*` methods into `_INTENT_KEYWORDS` table (#26)
- **#44** `refactor(agent)`: Consolidate 4 `_extract_*` methods into `_extract_param` dispatcher (#27)
- **#45** `docs(backend)`: Add docstrings to `Agent`, `reports.py`, `server.py`, `RAGIndex` (#35)
- **#46** `test(agent)`: Add 49 Python tests (intent routing, param extraction, `_apply_defaults`, handlers) (#29)
- **#47** `test(go)`: Add 17 Go tests (`resultFromScore`, `positionLabel`, `horizonWeights`, `buildHeadToHead`, `buildManagerSeason`, `buildManagerStreak`) (#30)

## Test coverage after session 2

| Suite | Count |
|---|---|
| Go `go test ./fpl-server/...` | 21 (17 new) |
| Python `pytest apps/backend/tests` | 51 (49 new) |
