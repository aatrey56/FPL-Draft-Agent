# ─────────────────────────────────────────────────────────────────────────────
# FPL Draft Agent — environment variable reference
#
# Copy this file to .env and fill in the values for your setup.
# The .env file at the repo root is loaded automatically on startup.
# ─────────────────────────────────────────────────────────────────────────────


# ── AI / LLM ─────────────────────────────────────────────────────────────────

# Your OpenAI API key.  Used by the Python agent to call the chat completions
# API when answering questions.
OPENAI_API_KEY=your-openai-key

# The OpenAI model to use for all chat completions (default: gpt-4.1).
# Any model that supports function/tool calling works here.
OPENAI_MODEL=gpt-4.1


# ── MCP server ───────────────────────────────────────────────────────────────

# The bearer token that the Python backend sends to the Go MCP server on every
# tool call.  Set this to a strong random secret and keep it out of version
# control.  The Go server checks this against the FPL_MCP_API_KEY env var.
FPL_MCP_API_KEY=your-strong-secret

# Full URL of the MCP server endpoint (default: http://localhost:8080/mcp).
# Change the host/port if you run the Go server on a different machine or port.
MCP_URL=http://localhost:8080/mcp

# Whether to start the Go MCP server automatically when the Python backend
# starts (default: true).  Set to false if you manage the Go server separately
# (e.g. via Docker Compose or a system service).
START_GO_SERVER=true

# The shell command used to start the Go MCP server when START_GO_SERVER=true.
# The default runs the server directly from source with `go run`.  Replace with
# a pre-built binary path (e.g. ./bin/fpl-server) in production.
GO_SERVER_CMD=go run ./apps/mcp-server/fpl-server --addr :8080 --path /mcp


# ── FPL league identity ───────────────────────────────────────────────────────

# Your FPL Draft league ID.  Find it in the URL when viewing your league on
# draft.premierleague.com (e.g. /draft/league/12345/details → LEAGUE_ID=12345).
# REQUIRED — the server will refuse to start if this is unset.
LEAGUE_ID=your-league-id

# Your FPL Draft entry (team) ID.  Used for personalised reports such as waiver
# recommendations and starting-XI advice.  Visible in the URL when viewing
# your team (e.g. /draft/entry/67890/event/1).
# REQUIRED — the server will refuse to start if this is unset.
ENTRY_ID=your-entry-id


# ── Data cache / refresh ─────────────────────────────────────────────────────

# ── Startup refresh ───────────────────────────────────────────────────────────

# Run a full data refresh every time the backend starts (default: true).
# This ensures GW live scores and transactions are always current when the Web
# UI loads.  The startup refresh always uses --refresh=all (ignoring
# CACHE_REFRESH_FAST) so stale files are never served.
# Set to false only in offline dev or CI environments.
CACHE_REFRESH_ON_START=true

# Optional: override the command used for the on-startup refresh.
# Leave unset to use the safe default:
#   go run ./apps/mcp-server/cmd/dev --refresh=all --league <LEAGUE_ID>
# Example with a pre-built binary:
#   CACHE_REFRESH_CMD_STARTUP=./bin/dev --refresh=all --league your-league-id
# CACHE_REFRESH_CMD_STARTUP=

# ── Daily scheduled refresh ───────────────────────────────────────────────────

# Optional: override the command used for the *daily scheduled* refresh.
# Leave unset to use the auto-generated incremental command.
# CACHE_REFRESH_CMD=go run ./apps/mcp-server/cmd/dev --refresh=scheduled --refresh-now --league your-league-id

# Re-run the cache refresh on a daily schedule (default: true).
# The job fires at the time configured in CACHE_REFRESH_TIME.
CACHE_REFRESH_DAILY=true

# 24-hour HH:MM time at which the daily cache refresh fires (default: 19:00).
# Pick a time shortly after GW scores are finalised (typically 18:00–19:00 UK).
CACHE_REFRESH_TIME=19:00

# When true the *daily scheduled* refresh uses --fast mode (only fetches missing
# files) for a quick incremental update (default: true).
# Does NOT affect the startup refresh, which always does a full fetch.
CACHE_REFRESH_FAST=true


# ── Paths ─────────────────────────────────────────────────────────────────────

# Absolute path to the repository root.  Auto-detected from the working
# directory if omitted.  Override only if you run the backend from a
# non-standard location (e.g. inside a container where cwd != repo root).
REPO_ROOT=/path/to/fpl-draft-agent

# Directory where generated markdown reports are saved (default: reports).
# Relative paths are resolved from REPO_ROOT; absolute paths are used as-is.
REPORTS_DIR=reports


# ── Scheduler ────────────────────────────────────────────────────────────────

# IANA timezone name used by the report scheduler (default: America/New_York).
# Reports run on Tuesday at 11:00 and Friday at 23:00 in this timezone.
# See https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
REPORTS_TZ=America/New_York
